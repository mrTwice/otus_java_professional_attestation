![Java](https://img.shields.io/badge/Java-21-blue.svg)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.2-success)
![License](https://img.shields.io/badge/license-MIT-green)

# ๐ง OTUS Java Professional Attestation

ะะธะบัะพัะตัะฒะธัะฝะพะต ะฟัะธะปะพะถะตะฝะธะต, ัะฐะทัะฐะฑะพัะฐะฝะฝะพะต ะฒ ัะฐะผะบะฐั ะบัััะฐ **Java Professional ะพั OTUS**. ะัะพะตะบั ะฒะบะปััะฐะตั ัะฟัะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ, ะทะฐะดะฐัะฐะผะธ ะธ ะฐะฒัะพัะธะทะฐัะธั ะฝะฐ ะฑะฐะทะต ัะพะฒัะตะผะตะฝะฝัั ัะตัะฝะพะปะพะณะธะน: **Spring Boot, OAuth2, PostgreSQL, Docker ะธ ะดั.**

---

## ๐ ะกะพะดะตัะถะฐะฝะธะต

- [๐ ะัััััะน ััะฐัั](#-ะฑัััััะน-ััะฐัั)
- [๐งฑ ะะฑัะธะน ััะตะบ ัะตัะฝะพะปะพะณะธะน](#-ะพะฑัะธะน-ััะตะบ-ัะตัะฝะพะปะพะณะธะน)
- [๐๏ธ ะะฐะทัะฐะฑะพัะบะฐ ะธ ะธะฝััะฐััััะบัััะฐ](#-ัะฐะทัะฐะฑะพัะบะฐ-ะธ-ะธะฝััะฐััััะบัััะฐ)
- [๐งฉ ะะพะดัะปะธ](#-ะผะพะดัะปะธ)
  - [๐ค tt-user-service](#-tt-user-service)
  - [โ tt-task-service](#-tt-task-service)
  - [๐ tt-oauth2-authorization-server](#-tt-oauth2-authorization-server)
- [๐ ะะฝะธัะธะฐะปะธะทะฐัะธั ะดะฐะฝะฝัั ะฟัะธ ะทะฐะฟััะบะต (CommandLineRunner)](#-ะธะฝะธัะธะฐะปะธะทะฐัะธั-ะดะฐะฝะฝัั-ะฟัะธ-ะทะฐะฟััะบะต-commandlinerunner)
- [๐ OAuth2-ะบะปะธะตะฝัั, ัะตะณะธัััะธััะตะผัะต ัะตัะฒะตัะพะผ ะฐะฒัะพัะธะทะฐัะธะธ](#-oauth2-ะบะปะธะตะฝัั-ัะตะณะธัััะธััะตะผัะต-ัะตัะฒะตัะพะผ-ะฐะฒัะพัะธะทะฐัะธะธ)
  - [1. internal-service-client (โ๏ธ ัะธััะตะผะฝัะน ะบะปะธะตะฝั)](#1-internal-service-client--ัะธััะตะผะฝัะน-ะบะปะธะตะฝั)
  - [2. swagger-client-user-service (๐ Swagger-ะบะปะธะตะฝั ะดะปั user-service)](#2-swagger-client-user-service--swagger-ะบะปะธะตะฝั-ะดะปั-user-service)
  - [3. swagger-client-task-service (๐ Swagger-ะบะปะธะตะฝั ะดะปั task-service)](#3-swagger-client-task-service--swagger-ะบะปะธะตะฝั-ะดะปั-task-service)
- [โ tt-task-service โ ะฝะฐัะฐะปัะฝัะต ะดะฐะฝะฝัะต](#-tt-task-service--ะฝะฐัะฐะปัะฝัะต-ะดะฐะฝะฝัะต)
  - [1. TaskTypeInitializer](#1-tasktypeinitializer)
  - [2. TaskPriorityInitializer](#2-taskpriorityinitializer)
  - [3. TaskStatusInitializer](#3-taskstatusinitializer)
  - [๐ Swagger UI โ Task Service](http://localhost:9590/swagger-ui/index.html)
- [๐ค tt-user-service โ ะฝะฐัะฐะปัะฝัะต ะดะฐะฝะฝัะต](#-tt-user-service--ะฝะฐัะฐะปัะฝัะต-ะดะฐะฝะฝัะต)
  - [1. RolePermissionInitializer](#1-rolepermissioninitializer)
  - [2. TestUserInitializer](#2-testuserinitializer)
  - [๐ Swagger UI โ User Service](http://localhost:9591/swagger-ui/index.html)
- [๐ ะะธัะตะฝะทะธั](#-ะปะธัะตะฝะทะธั)

---

## ๐ ะัััััะน ััะฐัั

```bash
cd development
docker-compose up -d
```

ะัะดัั ะทะฐะฟััะตะฝั ัะพะปัะบะพ ะฑะฐะทั ะดะฐะฝะฝัั PostgreSQL:

- `tt-task-service-postgres` โ ะฟะพัั `5432`
- `tt-user-service-postgres` โ ะฟะพัั `5433`
- `tt-oauth2-authorization-server-postgres` โ ะฟะพัั `5434`

> โ๏ธ Java-ะฟัะธะปะพะถะตะฝะธั **ะฝะต ะทะฐะฟััะบะฐัััั** ะฐะฒัะพะผะฐัะธัะตัะบะธ โ ะทะฐะฟััะบ ะฟัะพะธะทะฒะพะดะธััั ะธะท IDE ั ะฟัะพัะธะปะตะผ `dev`.

---

## ๐งฑ ะะฑัะธะน ััะตะบ ัะตัะฝะพะปะพะณะธะน

- Java 21
- Spring Boot 3+
- Spring Security / OAuth2 / Spring Authorization Server
- MapStruct, Lombok
- JPA / Hibernate
- PostgreSQL
- Flyway
- Gradle
- OpenID Connect (OIDC)
- JWT (JSON Web Token)
- Docker Compose
- OpenAPI (Swagger)
- AWS SDK / S3 (ะดะปั ะฒะปะพะถะตะฝะธะน, ะฟะพะบะฐ ะฝะต ัะตะฐะปะธะทะพะฒะฐะฝะพ)

---

## ๐๏ธ ะะฐะทัะฐะฑะพัะบะฐ ะธ ะธะฝััะฐััััะบัััะฐ
ะะฐะฟะบะฐ `development/` ัะพะดะตัะถะธั `docker-compose.yml` ะธ ะดะธัะตะบัะพัะธะธ ะดะปั ะบะฐะถะดะพะณะพ ะผะธะบัะพัะตัะฒะธัะฐ. ะญัะพ ะพัะฝะพะฒะฐ ะดะปั ะทะฐะฟััะบะฐ ะฑะฐะท ะดะฐะฝะฝัั ะธ, ะฒ ะฑัะดััะตะผ, ะบะพะฝัะตะนะฝะตัะธะทะฐัะธะธ ะฒัะตั Java-ะฟัะธะปะพะถะตะฝะธะน.

ะะปะฐะฝะธััะตััั:
- ะะฐััะธัะธัั docker-compose ะดะปั ัะฑะพัะบะธ ะธ ะทะฐะฟััะบะฐ Java-ัะตัะฒะธัะพะฒ 
- ะะฑะตัะฟะตัะธัั ะฟะพะปะฝะพัะตะฝะฝัั ััะตะดั ัะฐะทัะฐะฑะพัะบะธ ั Docker

---

## ๐งฉ ะะพะดัะปะธ

### ๐ค `tt-user-service`

ะะธะบัะพัะตัะฒะธั ัะฟัะฐะฒะปะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ, ัะพะปัะผะธ ะธ ะฟัะฐะฒะฐะผะธ ะดะพัััะฟะฐ.

#### ๐ง ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ

- CRUD ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน, ัะพะปะตะน, ะฟัะฐะฒ
- ะะตะณะธัััะฐัะธั, email-ะฒะฐะปะธะดะฐัะธั, ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ
- JWT ะธ Spring Security-ะธะฝัะตะณัะฐัะธั
- ะะฝัััะตะฝะฝะธะน API (`InternalUserController`)
- ะะฝัะตะณัะฐัะธั ั `auth-server`

#### ๐๏ธ ะกัััะบัััะฐ
- `controllers/`, `dtos/`, `entities/`, `repositories/`, `services/`, `validators/`, `mappers/`, `configurations/`

#### ๐งช ะขะตััั
ะะพะบะฐ ะพััััััะฒััั

#### ๐ ะะฐะฟััะบ
- ะฃะฑะตะดะธัะตัั, ััะพ ะทะฐะฟััะตะฝ `tt-user-service-postgres:5433`
- ะะฐะฟัััะธัั ะธะท IDE ั ะฟัะพัะธะปะตะผ `dev`

---

### โ `tt-task-service`

ะะธะบัะพัะตัะฒะธั ะดะปั ัะฐะฑะพัั ั ะทะฐะดะฐัะฐะผะธ, ะฟัะธะพัะธัะตัะฐะผะธ, ะบะพะผะผะตะฝัะฐัะธัะผะธ ะธ ะฒะปะพะถะตะฝะธัะผะธ.

#### ๐ง ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ

- ะะพะปะฝัะน CRUD ะทะฐะดะฐั ะธ ะฒะปะพะถะตะฝะธะน
- ะะพะผะผะตะฝัะฐัะธะธ ะธ ัะธะฟั ะทะฐะดะฐั
- ะะตะทะพะฟะฐัะฝะพััั ะธ ะฒะฐะปะธะดะฐัะธั ะฝะฐ ััะพะฒะฝะต ะฑะธะทะฝะตั-ะปะพะณะธะบะธ
- ะะฝัะตะณัะฐัะธั ั OAuth2 ะธ ัะฐะนะปะพะฒัะผ ััะฐะฝะธะปะธัะตะผ (S3 ะธะปะธ ัะพะฒะผะตััะธะผัะผ)

#### ๐๏ธ ะกัััะบัััะฐ
- `tasks/`, `comments/`, `attachments/`, `taskstatuses/`, `tasktypes/`, `storage/`, `common/`, `security/`

#### ๐งช ะขะตััั
ะะพะบะฐ ะพััััััะฒััั

#### ๐ ะะฐะฟััะบ
- ะฃะฑะตะดะธัะตัั, ััะพ ะทะฐะฟััะตะฝ `tt-task-service-postgres:5432`
- ะะฐะฟัััะธัั ะธะท IDE ั ะฟัะพัะธะปะตะผ `dev`

---

### ๐ `tt-oauth2-authorization-server`

ะกะตัะฒะตั ะฐะฒัะพัะธะทะฐัะธะธ ะฟะพ OAuth 2.1 ะธ OpenID Connect. ะัะฒะตัะฐะตั ะทะฐ ะฒัะฟััะบ ัะพะบะตะฝะพะฒ, ะฒะฐะปะธะดะฐัะธั, introspection ะธ ัะตะณะธัััะฐัะธั ะบะปะธะตะฝัะพะฒ ะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน. 

#### ๐ง ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ

- Authorization Code Flow + PKCE
- ID ะธ Access ัะพะบะตะฝั (JWT)
- OpenID Connect (`userinfo`, `scope=openid`)
- JWK-ะบะปััะธ ั ัะพัะฐัะธะตะน
- ะะฝัะตะณัะฐัะธั ั `tt-user-service`
- REST API ะดะปั introspection ะธ client registration

#### ๐๏ธ ะกัััะบัััะฐ
- `auth/`, `oidc/`, `client/`, `integrations/users/`, `common/exception/`

#### ๐งช ะขะตััั
ะะพะบะฐ ะพััััััะฒััั

#### ๐ ะะฐะฟััะบ
- ะฃะฑะตะดะธัะตัั, ััะพ ะทะฐะฟััะตะฝ `tt-oauth2-authorization-server-postgres:5434`
- ะะฐะฟัััะธัั ะธะท IDE ั ะฟัะพัะธะปะตะผ `dev`

---

# ๐ ะะฝะธัะธะฐะปะธะทะฐัะธั ะดะฐะฝะฝัั ะฟัะธ ะทะฐะฟััะบะต (CommandLineRunner)

ะะธะบัะพัะตัะฒะธัั ะฟัะพะตะบัะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะฟะพะปะฝััั ะฑะฐะทั ะดะฐะฝะฝัั ะพะฟัะตะดะตะปะตะฝะฝัะผ ะฝะฐัะฐะปัะฝัะผะธ ะทะฝะฐัะตะฝะธัะผะธ ะฟัะธ ะทะฐะฟััะบะต. ะญัะพ ัะดะตะปะฐะฝะพ ะดะปั ัะพะณะพ, ััะพะฑั ะพะฑะตัะฟะตัะธัั:
- ะฟะพะปะฝะพัะตะฝะฝัั ัะฐะฑะพัั ะฐะฒัะพัะธะทะฐัะธะธ ะธ ะฑะตะทะพะฟะฐัะฝะพััะธ;
- ัะดะพะฑััะฒะพ ะปะพะบะฐะปัะฝะพะณะพ ัะตััะธัะพะฒะฐะฝะธั ะธ ัะฐะทัะฐะฑะพัะบะธ;
- ะดะตะผะพะฝัััะฐัะธะพะฝะฝัะต ััะตะฝะฐัะธะธ (ะฝะฐะฟัะธะผะตั, Swagger OAuth).

---

## ๐ OAuth2-ะบะปะธะตะฝัั, ัะตะณะธัััะธััะตะผัะต ัะตัะฒะตัะพะผ ะฐะฒัะพัะธะทะฐัะธะธ

### 1. `internal-service-client` (โ๏ธ ัะธััะตะผะฝัะน ะบะปะธะตะฝั)
- **ะขะธะฟ:** machine-to-machine
- **grant type:** `client_credentials`
- **authentication methods:** `client_secret_basic`, `client_secret_post`
- **scopes:**
  - `user:view`
  - `user:manage`
  - `user:delete`
- **ะะฐะทะฝะฐัะตะฝะธะต:** ะธัะฟะพะปัะทัะตััั **ัะฐะผะธะผ ัะตัะฒะตัะพะผ ะฐะฒัะพัะธะทะฐัะธะธ (SAS)** ะธ ะดััะณะธะผะธ ะผะธะบัะพัะตัะฒะธัะฐะผะธ ะดะปั ะฒะฝัััะตะฝะฝะธั ะทะฐะฟัะพัะพะฒ ะบ `tt-user-service`

### 2. `swagger-client-user-service` (๐ Swagger-ะบะปะธะตะฝั ะดะปั user-service)
- **grant types:** `authorization_code`, `refresh_token`
- **redirect URI:** `http://localhost:9591/swagger-ui/oauth2-redirect.html`
- **scopes:**
  - `openid`, `profile`, `offline_access`
  - `user:*`, `role:*`, `permission:*`
- **ะะฐะทะฝะฐัะตะฝะธะต:** ะธัะฟะพะปัะทัะตััั Swagger UI ะฒ `tt-user-service` ะดะปั ะฐะฒัะพัะธะทะฐัะธะธ ะธ ัะตััะธัะพะฒะฐะฝะธั ะทะฐัะธััะฝะฝัั ัะฝะดะฟะพะธะฝัะพะฒ

### 3. `swagger-client-task-service` (๐ Swagger-ะบะปะธะตะฝั ะดะปั task-service)
- **grant types:** `authorization_code`, `refresh_token`
- **redirect URI:** `http://localhost:9590/swagger-ui/oauth2-redirect.html`
- **scopes:**
  - `openid`, `profile`, `offline_access`
  - `task:*`, `comment:*`, `attachment:*`, `task-type:*`, `task-status:*`, `task-priority:*`
- **ะะฐะทะฝะฐัะตะฝะธะต:** ะฐะฒัะพัะธะทะฐัะธั ัะตัะตะท Swagger UI ะฒ `tt-task-service`, ะดะพัััะฟ ะบะพ ะฒัะตะผ ััะฝะบัะธะพะฝะฐะปัะฝะพัััะผ ะทะฐะดะฐั

---

## โ tt-task-service โ ะฝะฐัะฐะปัะฝัะต ะดะฐะฝะฝัะต
### 1. `TaskTypeInitializer`
ะะพะฑะฐะฒะปัะตั **ัะธะฟั ะทะฐะดะฐั**:

| Code      | Title    | Description                  | Emoji |
|-----------|----------|------------------------------|--------|
| `bug`     | Bug      | A bug or defect              | ๐     |
| `feature` | Feature  | New feature or improvement   | โจ     |
| `task`    | Task     | General task or action       | ๐     |


### 2. `TaskPriorityInitializer`
ะะพะฑะฐะฒะปัะตั **ะฟัะธะพัะธัะตัั ะทะฐะดะฐั**:

| Code     | Title   | Urgency         | Order | Color    | Default |
|----------|---------|-----------------|--------|----------|---------|
| `high`   | High    | High urgency    | 1      | `#FF3B30` | โ ะะฐ   |
| `medium` | Medium  | Normal urgency  | 2      | `#FF9500` | โ ะะตั  |
| `low`    | Low     | Low urgency     | 3      | `#34C759` | โ ะะตั  |


### 3. `TaskStatusInitializer`
ะะพะฑะฐะฒะปัะตั **ััะฐัััั ะทะฐะดะฐั**:

| Code         | Title       | Description         | Final | Default | Order | Color     |
|--------------|-------------|---------------------|--------|---------|--------|-----------|
| `todo`       | To Do       | Task not started    | โ     | โ       | 1      | `#D3D3D3` |
| `in_progress`| In Progress | Work ongoing        | โ     | โ       | 2      | `#87CEEB` |
| `review`     | Review      | Awaiting review     | โ     | โ       | 3      | `#FFD700` |
| `done`       | Done        | Task completed      | โ     | โ       | 4      | `#32CD32` |
| `cancelled`  | Cancelled   | Task was cancelled  | โ     | โ       | 5      | `#A9A9A9` |

---

## ๐ค `tt-user-service` โ ะฝะฐัะฐะปัะฝัะต ะดะฐะฝะฝัะต

### 1. `RolePermissionInitializer`
ะกะพะทะดะฐัั 4 ะฑะฐะทะพะฒัะต ัะพะปะธ ั ัะพะพัะฒะตัััะฒัััะธะผะธ ะฟัะฐะฒะฐะผะธ (permissions):

#### ๐ ะะพะปะธ ะธ ะฟัะฐะฒะฐ:

| ะะพะปั     | ะะพัััะฟ ะบ | ะะพะผะผะตะฝัะฐัะธะธ | ะะปะพะถะตะฝะธั | ะขะธะฟั/ะกัะฐัััั/ะัะธะพัะธัะตัั | ะะพะปัะทะพะฒะฐัะตะปะธ | ะะพะปะธ/ะัะฐะฒะฐ | ะัะพะตะบัั |
|----------|----------|-------------|----------|--------------------------|--------------|------------|---------|
| `ADMIN`  | โ ะฒัะต    | โ ะฒัะต       | โ ะฒัะต    | โ ะฒัะต                   | โ ะฒัะต       | โ ะฒัะต     | โ       |
| `MANAGER`| โ ะฒัะต    | โ ะฒัะต       | โ ะฒัะต    | โ ััะตะฝะธะต/ะพะฑะฝะพะฒะปะตะฝะธะต     | ๐/โ๏ธ        | ๐         | โ       |
| `USER`   | โ๏ธ        | โ๏ธ/๐        | โ๏ธ/๐     | ๐ ัะพะปัะบะพ                | ๐           | โ          | โ       |
| `GUEST`  | ๐        | ๐           | ๐       | ๐ ัะพะปัะบะพ                | โ            | โ          | ๐       |

> โ โ ัะพะทะดะฐัั, ะฟัะพัะธัะฐัั, ะพะฑะฝะพะฒะธัั, ัะดะฐะปะธัั  
> โ๏ธ โ ัะพะทะดะฐัั, ะฟัะพัะธัะฐัั, ะพะฑะฝะพะฒะธัั  
> ๐ โ ัะพะปัะบะพ ะฟัะพัะผะพัั

### 2. `TestUserInitializer`
ะกะพะทะดะฐัั ะพะดะฝะพะณะพ ัะตััะพะฒะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั:

| ะะพะปะต            | ะะฝะฐัะตะฝะธะต                       |
|-----------------|--------------------------------|
| **username**    | `test-user`                    |
| **email**       | `testuser@example.com`         |
| **ัะพะปั**        | `ADMIN`                        |
| **ะฟะฐัะพะปั**      | `password` (ะฒ bcrypt-ัััะต)     |
| **email ะฟะพะดัะฒะตัะถะดัะฝ** | โ                        |
| **OIDC ะดะฐะฝะฝัะต** | `oidcProvider=local`           |
| **ะัะพัะธะปั**     | `https://example.com/profile/test-user` |
| **Avatar**      | `https://example.com/avatar.png` |
| **Address**     | `123 Main St, Springfield, USA` |

> ๐ ะะพะถะฝะพ ะฐะฒัะพัะธะทะพะฒะฐัััั ะฒ Swagger ัะตัะตะท OAuth2 ะปะพะณะธะฝ  `test-user` ะฟะฐัะพะปั `password`.

---

## ๐ ะะธัะตะฝะทะธั

MIT License.

---